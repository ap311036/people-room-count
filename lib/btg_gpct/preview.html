<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../core/core.css" rel="stylesheet">
    <link rel="stylesheet" href="../ic-ln/css.css">
    <link href="css.css" rel="stylesheet">
    <title>btg_gpct</title>
    <!-- 使IE8可以用HTML5與看懂media queries，必需放在主要樣式下一行 -->
    <!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
    <script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="module.js"></script>
</head>

<body class="fz-smd">
    <div class="container example">
        <!-- <div class="btg_gpct">
            <button class="minus"><i class="icon ic-ln toolcancelb"></i></button>
            <div class="amount">0</div>
            <button class="add"><i class="icon ic-ln tooladdb"></i></button>
        </div> -->
        <h3>style1</h3>
        <div class="btg_gpct">
            <button class="ic-ln toolcancelb minus"></button>
            <div class="amount">0</div>
            <button class="ic-ln tooladdb add"></button>
        </div>
        <h3>成人</h3>
        <div class="btg_gpct xin test1">
            <input id="test1" class="amount" type="text" value="1" readonly>
        </div>
        <h3>兒童</h3>
        <div class="btg_gpct xin test2">
            <input id="test2" class="amount" type="text" value="0" readonly>
        </div>
        <h3>嬰兒</h3>
        <div class="btg_gpct xin test3">
            <input id="test3" class="amount" type="text" value="0" readonly>
        </div>
        <h3>style circle</h3>
        <div class="btg_gpct xin-circle">
            <button class="minus ic-ln toolcancelbf"></button>
            <input class="amount" type="text" value="0" readonly>
            <button class="add ic-ln tooladdbf"></button>
        </div>
    </div>
</body>
<script>

    $('.btg_gpct.xin-circle').btg_gpct({max:10,min:0});


    var maxTotal = 7;


    $('.btg_gpct.test1').btg_gpct({
        max:7,
        min:1,
        whenClick:function(){

            var val1 = parseInt($('#test1').val());
            var val2 = parseInt($('#test2').val());
            var val3 = parseInt($('#test3').val());

            $('.xin.test3').btg_gpct('updateOption',{
                max:val1,
                min:0
            });

            $('.xin.test2').btg_gpct('updateOption',{
                max: maxTotal - (val1+val3),
                min:0
            });

            $('#test2').trigger('change');
            $('#test3').trigger('change');
            
            if( val3 > val1 ){
                $('#test3').attr('value',0);
                $('#test3').trigger('change');
                $('.xin.test3').data('btg_gpct').nowValue = 0;
            }
            

            if( (val1+val2+val3) == maxTotal){
                $('.xin.test1').btg_gpct('updateOption',{max:val1,min:1});
                $('.xin.test2').btg_gpct('updateOption',{max:val2,min:0});
                $('.xin.test3').btg_gpct('updateOption',{max:val3,min:0});
                $('#test1').trigger('change');
                $('#test2').trigger('change');
                $('#test3').trigger('change');
            }

        }
    });
    $('.btg_gpct.test2').btg_gpct({
        max:7,
        min:0,
        whenClick:function(){
            var val1 = parseInt($('#test1').val());
            var val2 = parseInt($('#test2').val());
            var val3 = parseInt($('#test3').val());

            $('.xin.test1').btg_gpct('updateOption',{
                max: maxTotal - (val2+val3),
                min:1
            });

            $('.xin.test3').btg_gpct('updateOption',{
                max:val1,
                min:0
            });

            $('#test1').trigger('change');
            $('#test3').trigger('change');

            if( (val1+val2+val3) == maxTotal){
                $('.xin.test1').btg_gpct('updateOption',{max:val1,min:1});
                $('.xin.test2').btg_gpct('updateOption',{max:val2,min:0});
                $('.xin.test3').btg_gpct('updateOption',{max:val3,min:0});
                $('#test1').trigger('change');
                $('#test2').trigger('change');
                $('#test3').trigger('change');
            }

        }
    });
    $('.btg_gpct.test3').btg_gpct({
        max:parseInt($("#test1").val()),
        min:0,
        whenClick:function(){
            var val1 = parseInt($('#test1').val());
            var val2 = parseInt($('#test2').val());
            var val3 = parseInt($('#test3').val());

            $('.xin.test1').btg_gpct('updateOption',{
                max: maxTotal - (val2+val3),
                min:1
            });

            $('.xin.test2').btg_gpct('updateOption',{
                max: maxTotal - (val1+val3),
                min:0
            });

            $('#test1').trigger('change');
            $('#test2').trigger('change');

            if( (val1+val2+val3) == maxTotal){
                $('.xin.test1').btg_gpct('updateOption',{max:val1,min:1});
                $('.xin.test2').btg_gpct('updateOption',{max:val2,min:0});
                $('.xin.test3').btg_gpct('updateOption',{max:val3,min:0});
                $('#test1').trigger('change');
                $('#test2').trigger('change');
                $('#test3').trigger('change');
            }
        }
    });
</script>
</html>
